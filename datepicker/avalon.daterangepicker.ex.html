<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<meta http-equiv="x-ua-compatible" content="ie=edge" />
<title>daterangepicker demo </title>
<script src="../avalon.js"></script>
</head>
<body class="ms-controller" ms-controller="demo">

<!--     <fieldset>
        <legend>日期范围框</legend>
        <div ms-widget="daterangepicker, a" data-daterangepicker-disabled="disA">
        </div>

        {{from2}}
        {{to2}}
    </fieldset> -->
 <!--    <fieldset>
        <legend>日期范围框 配置参数</legend>
        <div ms-widget="daterangepicker,$,rangeOpts" data-daterangepicker-duplex="from5, to5" data-daterangepicker-select="select"/>

        {{from5}}
        {{to5}}
    </fieldset>
 -->

<!--     <fieldset>
        <legend>日期范围框 默认值为空,使用了rule="opts2"</legend>
        <div ms-widget="daterangepicker" data-daterangepicker-duplex="fromEmpty, toEmpty" data-daterangepicker-rules="opts2"/>

        {{fromEmpty}}
        {{toEmpty}}
    </fieldset>
 -->
<!--     <fieldset>
        <legend>日期范围框setDate</legend>
        <div ms-widget="daterangepicker, df3" data-daterangepicker-duplex="from3, to3"/>

        {{from3}}
        {{to3}}

        <button ms-click="setdates">设置时间为'2013-09-09', '2014-09-09'</button>
        <button ms-click="setlabel">设置标签为'我是label'</button>
    </fieldset> -->

    <fieldset>
        <legend>日期范围框 配置初始化label显示 支持select回调函数,data-rangepicker-rules</legend>
        <div ms-widget="daterangepicker" data-daterangepicker-duplex="from6, to6" data-daterangepicker-select="select" data-daterangepicker-label="xxx" data-daterangepicker-rules="$rulesxx"/>
    </fieldset>

<!--     <fieldset>
        <legend>日期范围框显示内容的自定义（日期显示，弹层上的日期范围显示）</legend>
        <div ms-widget="daterangepicker,$,customOpts" data-daterangepicker-label="自定义日期范围框显示内容" data-daterangepicker-duplex="from6, to6"/>
    </fieldset>  -->

    <script> 
        require("datepicker/avalon.daterangepicker", function(avalon) {
            var model = avalon.define("demo", function(vm) {
                vm.from2 = '2014-01-d02';
                vm.to2 = '2014-01-15';  
                vm.disA = false; 
                vm.from5 = '2014-02-15';
                vm.to5 = '2014-02-21';
                
                vm.fromEmpty = null;
                vm.toEmpty = null;
                vm.from3 = '2014-01-05';
                vm.to3 = '2014-01-11';
                vm.from6 = '2014-02-14';
                vm.to6 = '2014-02-24';
                vm.$rulesxx = {
                    rules: '3D, 2D, 1M'
                };
                vm.rangeOpts = {
                    opts: {
                        msgFormat: function(from, to) {
                            return '已选时间段：' + from.getRawValue() + ' 至 ' + to.getRawValue() + ' 共计' + (Math.floor( (to.getDate().getTime() - from.getDate().getTime())/1000/60/60/24 + 1 ) - 1) + '晚';
                        }
                    },
                    rules: {
                        rules : 'null, 5D, 10D',
                        fromMinDate: '2014-02-14'
                    }
                };
                vm.opts2 = {
                    rules : 'null, 5D, 10D',
                    fromMinDate: '2014-02-14'
                };
                vm.setdates = function() {
                    $$.$ui('df3').setDates('2013-02-09', '2015-07-09');
                };
                vm.setlabel = function() {
                    $$.$ui('df3').setLabel('我是label：');
                };
                //daterangepicker支持select回调函数
                vm.select = function(from, to) {
                    console.log("select回调");
                    window.console && console.log(arguments);
                };
                vm.customOpts = {
                    opts: {
                        msgFormat: function(from, to) {
                            return '已选时间段：' + from.getRawValue() + ' 至 ' + to.getRawValue() + ' 共计' + (Math.floor( (to.getDate().getTime() - from.getDate().getTime())/1000/60/60/24 + 1 ) - 1) + '晚';
                        },
                        datesDisplayFormat: function(label, fromDate, toDate) {
                            return '从 ' + fromDate + ' 到 ' + toDate;
                        }
                    }
                };

            })
            var $$ = {};
            $$.$ui = function(id) {
                return avalon.vmodels[id];
            }
            avalon.scan();
        })
    </script>
</body>
</html>

