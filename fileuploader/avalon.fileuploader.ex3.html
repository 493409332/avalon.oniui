<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>uploader demo 文件尺寸设置，分块上传文件</title>
	<script src="../avalon.js"></script>
	<link rel="stylesheet" href="../style/avalon.doc.css"/>
	<link rel="stylesheet" href="avalon.fileuploader.ex.css"/>
</head>
<body ms-controller="demo">
	<h1>尺寸限定</h1>
	<p>可以使用maxFileSize来限制单个文件的大小，使用filePoolSize选项配置待上传文件池的大小。maxFileSize默认值是5M，filePoolSize默认值是200M。注意filePoolSize的值，不要过大，因为在采用Flash方案的低版本浏览器（IE9及以下）内，Flash只能一次将文件读入内存，过大的filePoolSize可能导致浏览器占用内存过高。本例中maxFileSize的值是1024*500，</p>
    <div ms-widget="fileuploader,demoUploader1,$uploaderOptions1"></div>


	<h1>配置不同后缀名的文件的预览</h1>
	<p>可以使用previewFileTypes和noPreviewPath为不同的非图片类型的文件后缀配置预览图。例如为zip文件配置预览图，但是其他文件配置为no-preview，需要这样：<strong>previewFileTypes = { '.zip': zip-file-path },  noPreviewPath = no-preview-file-path</strong></p>
    <div ms-widget="fileuploader,demoUploader2,$uploaderOptions2"></div>


	<h1>关闭预览图生成</h1>
	<p>将enablePreviewGenerating选项设为false时，所有文件类型全部使用noPreview图片表示</p>
    <div ms-widget="fileuploader,demoUploader3,$uploaderOptions3"></div>

	<h1>关闭预览窗</h1>
	<p>将showPreview设为false以关闭预览图显示。注意将enablePreviewGenerating配置项设为false可以增强性能，否则将继续生成base64的preview用以自定义preview的外观，具体参见<a href="avalon.fileuploader.ex5.html">自定义预览窗</a>的例子</p>
    <div ms-widget="fileuploader,demoUploader3,$uploaderOptions4"></div>

	<script>
		require(["./fileuploader/avalon.fileuploader","domReady!"], function(){
			var model = avalon.define("demo", function(vm){
				var basicOptions = {
		            addButtonText: "添加文件",
		            uploadButtonText: "开始上传",
		            serverConfig: {
		                url: "../../Handler1.ashx",
		                userName: undefined,
		                password: undefined
		            }
				};


				vm.$uploaderOptions1 = avalon.mix({
					maxFileSize: 1024 * 500
				}, basicOptions);


				vm.$uploaderOptions2 = avalon.mix({
		            previewFileTypes: {
		                ".zip": "zip.png"
		            },
		            noPreviewPath: "no-preview.png"
				}, basicOptions);


				vm.$uploaderOptions3 = avalon.mix({
		            enablePreviewGenerating: false
				}, basicOptions);

				vm.$uploaderOptions4 = avalon.mix({
					showPreview: false,
		            enablePreviewGenerating: false
				}, basicOptions);


			});
			avalon.scan();
		});
	</script>
</body>
</html>

