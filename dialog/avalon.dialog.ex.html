<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<meta http-equiv="x-ua-compatible" content="ie=edge" />
<title>dialog demo </title>
<script src="../avalon.js"></script>
</head>
<body class="ms-controller" ms-controller="demo">
    <fieldset>  
        <legend>确认框</legend>
            <button ms-click="show('aa')">打开对话框</button>
            <div ms-widget="dialog,aa" data-dialog-title="xxxx" data-dialog-submit="okfun(close)" data-dialog-cancel="cancelfun(close)">
                呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵
            </div>
    </fieldset>
    <fieldset>
        <legend>隐藏close按钮的确认框</legend>
        <button ms-click="show('ss')">打开对话框</button>
        <div ms-widget="dialog,ss" data-dialog-title="xxxx" data-dialog-submit="okfun(close)" data-dialog-cancel="cancelfun(close)" data-dialog-show-close=false>
            呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵
            发送到发送到发生发生地方撒旦法撒旦法师打发沙发垫发大水发撒旦飞洒发沙发沙发上大发发送到发送到发大水发送发生地方撒旦法撒旦法撒旦任务二期为热情污染物而犬瘟热日期日期额外人全文尔特我去惹人
            发送到发送到发生发生地方撒旦法撒旦法师打发沙发垫发大水发撒旦飞洒发沙发沙发上大发发送到发送到发大水发送发生地方撒旦法撒旦法撒旦任务二期为热情污染物而犬瘟热日期日期额外人全文尔特我去惹人
            <button ms-click="show('gg', 'demo')">打开对话框</button>
            <div ms-widget="dialog,gg" data-dialog-title="xxxx" data-dialog-submit="okfun(close)" data-dialog-cancel="cancelfun(close)" data-dialog-show-close=false>
                换回来后就会很快更快更好感觉回来了黄金客户
                发送到发送到发生发生地方撒旦法撒旦法师打发沙发垫发大水发撒旦飞洒发沙发沙发上大发发送到发送到发大水发送发生地方撒旦法撒旦法撒旦任务二期为热情污染物而犬瘟热日期日期额外人全文尔特我去惹人
                <button ms-click="show('mm', 'demo')">打开对话框</button>
                <div ms-widget="dialog,mm" data-dialog-title="xxxx" data-dialog-submit="okfun(close)" data-dialog-cancel="cancelfun(close)" data-dialog-show-close=false>
                    哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈啊哈哈哈哈哈哈哈哈哈哈哈啊哈哈哈
                </div>
            </div>
        </div>
    </fieldset>

    <fieldset>  
        <legend>警告框</legend>
            <button ms-click="show('bb')">打开对话框</button>
            <div ms-widget="dialog,bb,opts">
                呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵
            </div>
    </fieldset>
 
    <fieldset>
        <legend>设置dialog的宽度(默认为480)</legend>

        <button ms-click="show('ff')">打开对话框</button>
        <div ms-widget="dialog,ff" data-dialog-type="ALERT" data-dialog-title="xxxxxx" data-dialog-width="300">
        呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵
        </div>
    </fieldset> 

    <fieldset>
        <legend>可以从方法中执行的dialog</legend>
        <button ms-click="customShow">打开对话框</button>
        <button ms-click="changeDialog">改变对话框内容</button>
        <button ms-click="changeTitle">改变对话框title</button>
        <button ms-click="changeModel">改变对话框model</button>
    </fieldset> 
    
    <script> 
        require("dialog/avalon.dialog", function($$) {
            $$.define("demo", function(vm) {
                var dialog;

                vm.opts = {
                    type: 'alert',
                    title: 'xxx'
                };
                vm.tpl = '我是tpl';
                vm.tpl2 = '我是tpl2';
                vm.show = function( id ){
                    $$.$ui( id ).show();
                }
                vm.okfun = function( close ){
                    alert('success')
                    close()
                }
                vm.cancelfun = function( close ){
                    alert('fail')
                    close()
                }

                /**
                 * 使用方法生成dialog
                 */
                vm.customShow = function() {
                    if(!dialog) {
                        dialog = $$.dialog( {
                            model: 'demo',
                            title: 'customShow',
                            content: '呵呵呵呵 {{tpl}} ',
                            id: 'cus',
                            confirm: 'okfun( close )',
                            cancel: 'cancelfun( close )',
                            type: 'alert'
                        } );
                    }

                    dialog.show();
                }
                /**
                 * 更改dialog的content
                 */
                vm.changeDialog = function() {
                    if(!dialog) {
                        return;
                    }
                    dialog.setContent('{{tpl2}}');
                }
                /**
                 * 更改dialogtitle
                 */
                vm.changeTitle = function() {
                    if(!dialog) {
                        return;
                    }
                    dialog.setTitle('我是title');
                };

                vm.m = {
                    tpl: '我变了',
                    okfun: function( close ) {
                        alert('我变了');
                        close();
                    },
                    cancelfun: function( close ) {
                        alert('cancel变了');
                        close();
                    }
                };

                vm.changeModel = function() {
                    dialog.setModel(vm.m);
                };
            })
            $$.scan();
        })
    </script>
</body>
</html>

