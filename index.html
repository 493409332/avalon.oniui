<!DOCTYPE html>
<html>
    <head>
        <title>目录</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">
        <link type="text/css" rel="stylesheet" href="./style/avalon.doc.css" />
        <link type="text/css" rel="stylesheet" href="./style/avalon.index.css" />
        <script src="avalon.js"></script>
    </head>
    <body>
        <div class="header">
            <div class="nav">
                <ul>
                    <li class="active">组件库</li>
                    <li>字体图标</li>
                </ul>
                <div class="search">
                    <input type="text"/>
                </div>
            </div>
            <h1><span>AvalonUI组件库</span></h1>
        </div>
        <div class="content ms-controller" ms-css-min-height="{{uiListHeight}}" ms-controller ="avalonUiDocument">
            <ul class="ui-list">
                <li ms-repeat="widgets" data-repeat-rendered="uiListRendered"><a href="#" ms-class="active: $index===currentIndex" ms-click="showDocument(el, $event, $index)">{{el}}</a></li> 
            </ul>
            <div class="ui-doc" ms-include-src="{{widget}}/avalon.{{widget}}.doc.html"  data-include-loaded="afterTemplateLoaded"></div>
        </div>
        <div class="footer">
            <ul>
                <li>关于AvalonUI</li>
                <li>联系我们</li>
                <li>业务合作</li>
                <li>常见问题</li>
                <li class="last">友情链接</li>
            </ul>
        </div>
        <script>
            avalon.ready(function() {
                var docCssReg = /<link[^>]*style\/avalon\.doc\.css[^>]*\>/img,
                    widgets = ["accordion", "tab", "spinner", "slider", "textbox", "dropdown", "datepicker", "dialog", "at", "button", "checkboxlist", "cookie", "draggable", "flipswitch", "hotkeys", "json", "miniswitch", "notice", "pager", "position", "preview", "progressbar", "resizable", "roleselect", "scrollbar", "scrollspy", "simplegrid", "store", "switchdropdown", "tooltip"].sort();
                var vmodel = avalon.define("avalonUiDocument", function(vm) {
                    vm.widgets = widgets;
                    vm.widget = "accordion";
                    vm.currentIndex = 0;
                    vm.uiListHeight = 0;
                    vm.showDocument = function(widget, event, index) {
                        event.preventDefault();
                        vmodel.widget = widget;
                        vmodel.currentIndex = index;
                    };
                    vm.afterTemplateLoaded = function(template) {
                        template = template.replace(docCssReg, "");
                        return template;
                    };
                    vm.uiListRendered = function() {
                        vmodel.uiListHeight = avalon(this).height();
                    }
                })
                avalon.scan();
            })
        </script>
    </body>
</html>
